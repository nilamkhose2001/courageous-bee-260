<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      #addProd {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
      }
      #cart{
        width: 20%;
        height: 40px;
        float: right;
      }
    </style>
  </head>
  <body>
    <button id="cart"><a href="./cart.html">Go To Cart</a></button>
    <div id="addProd"></div>
  </body>
</html>
<script>
  let data = [
    {
      img: "https://cdn.shopify.com/s/files/1/0052/7551/6995/products/Women_sPage-1_compact.gif?v=1656064858",
      name: " The Beauty Bundle July Fab Bag",
      price: 599,
      productId: "1",
    },
    {
      img: "https://cdn.shopify.com/s/files/1/0052/7551/6995/products/Women_sPage-1_compact.gif?v=1656064858",
      name: " The Beauty Bundle July Fab Bag",
      price: 599,
      productId: "2",
    },
    {
      img: "https://cdn.shopify.com/s/files/1/0052/7551/6995/products/Women_sPage-1_compact.gif?v=1656064858",
      name: " The Beauty Bundle July Fab Bag",
      price: 599,
      productId: "3",
    },
  ];

  let cartItem = JSON.parse(localStorage.getItem("cartData")) || [];

  DisplayData(cartItem);
  function DisplayData() {
    data.forEach(function (el) {
      let ndiv = document.createElement("div");

      let avatar = document.createElement("img");
      avatar.setAttribute("src", el.img);

      let pName = document.createElement("p");
      pName.innerText = el.name;

      let price = document.createElement("p");
      price.innerText = el.price;

      let btn = document.createElement("button");
      btn.innerText = "Add to Cart";
      btn.addEventListener("click", function () {
        if (CartPage(el.productId) === true) {
          alert("product added successfully in cart");
          cartItem.push(el);
          localStorage.setItem("cart", JSON.stringify(cartItem));
        } else {
          alert("product already exist in cart");
        }
      });

      ndiv.append(avatar, pName, price, btn);
      document.querySelector("#addProd").append(ndiv);
    });
  }
  function CartPage(id) {
    for (let i = 0; i < cartItem.length; i++) {
      if (cartItem[i].productId === id) {
        return false;
      }
    }
    return true;
  }
</script>
